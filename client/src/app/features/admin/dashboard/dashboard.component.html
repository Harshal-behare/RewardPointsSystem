<div class="dashboard-container">
  <!-- KPI Cards Section -->
  <section class="kpi-section">
    <app-kpi-card
      *ngFor="let kpi of kpiData()"
      [icon]="kpi.icon"
      [label]="kpi.label"
      [value]="kpi.value"
      [trend]="kpi.trend"
      (click)="navigateToPage(kpi.route)"
      style="cursor: pointer;"
      title="Click to view {{ kpi.label }}"
    ></app-kpi-card>
  </section>

  <!-- Quick Actions Section -->
  <section class="quick-actions-section">
    <app-card title="âš¡ Quick Actions">
      <div class="quick-actions-grid">
        <button class="quick-action-btn event-btn" (click)="openEventModal()">
          <span class="action-icon">ğŸ“…</span>
          <div class="action-content">
            <h3>Create Event</h3>
            <p>Add a new reward event</p>
          </div>
        </button>

        <button class="quick-action-btn product-btn" (click)="openProductModal()">
          <span class="action-icon">ğŸ</span>
          <div class="action-content">
            <h3>Add Product</h3>
            <p>Add new product to catalog</p>
          </div>
        </button>

        <button class="quick-action-btn users-btn" (click)="navigateToPage('/admin/users')">
          <span class="action-icon">ğŸ‘¥</span>
          <div class="action-content">
            <h3>Manage Users</h3>
            <p>View and manage users</p>
          </div>
        </button>

        <button class="quick-action-btn redemptions-btn" (click)="navigateToPage('/admin/redemptions')">
          <span class="action-icon">ğŸ›ï¸</span>
          <div class="action-content">
            <h3>Redemptions</h3>
            <p>Process pending redemptions</p>
          </div>
        </button>
      </div>
    </app-card>
  </section>

  <!-- Charts Section -->
  <section class="charts-section">
    <div class="chart-row">
      <!-- Points Awarded Chart -->
      <!-- <app-card title="Monthly Points Awarded" class="chart-card">
        <div class="chart-placeholder">
          <div class="chart-info">
            <p class="chart-label">ğŸ“ˆ Monthly Trend</p>
            <p class="chart-value">No historical data available</p>
          </div>
          <div class="bar-chart">
            <div class="bar-item" *ngFor="let value of chartData().pointsAwarded; let i = index">
              <div class="bar" [style.height.%]="value > 0 ? (value / 6000) * 100 : 5">
                <span class="bar-label" *ngIf="value > 0">{{ value }}</span>
              </div>
              <span class="bar-month">{{ chartData().labels[i] }}</span>
            </div>
          </div>
        </div>
      </app-card> -->

      <!-- Redemptions Chart -->
      <!-- <app-card title="Redemption Trends" class="chart-card">
        <div class="chart-placeholder">
          <div class="chart-info">
            <p class="chart-label">ğŸ“Š Redemption Activity</p>
            <p class="chart-value">No historical data available</p>
          </div>
          <div class="bar-chart">
            <div class="bar-item" *ngFor="let value of chartData().redemptions; let i = index">
              <div class="bar redemption-bar" [style.height.%]="value > 0 ? (value / 3000) * 100 : 5">
                <span class="bar-label" *ngIf="value > 0">{{ value }}</span>
              </div>
              <span class="bar-month">{{ chartData().labels[i] }}</span>
            </div>
          </div>
        </div>
      </app-card> -->
    </div>
  </section>

  <!-- Recent Activity Section -->
  <section class="activity-section">
    <!-- <app-card title="Recent Activity">
      <div class="activity-list" *ngIf="recentActivities().length > 0; else noActivities">
        <div class="activity-item" *ngFor="let activity of recentActivities()">
          <div class="activity-icon">
            <app-badge [variant]="getActivityTypeClass(activity.type)">
              {{ activity.type }}
            </app-badge>
          </div>
          <div class="activity-content">
            <p class="activity-description">{{ activity.description }}</p>
            <div class="activity-meta">
              <span class="activity-user">{{ activity.user }}</span>
              <span class="activity-time">{{ activity.timestamp }}</span>
            </div>
          </div>
        </div>
      </div>
      <ng-template #noActivities>
        <div class="no-data-message">
          <p>ğŸ“‹ No recent activity to display</p>
          <p class="no-data-hint">Activity will appear here as you create events, add products, and manage the system.</p>
        </div>
      </ng-template>
    </app-card> -->
  </section>
</div>

<!-- Create Event Modal -->
<div class="modal-overlay" *ngIf="showEventModal()" (click)="closeEventModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>ğŸ“… Create New Event</h3>
      <button class="close-btn" (click)="closeEventModal()">âœ•</button>
    </div>

    <div class="modal-body">
      <form>
        <div class="form-group">
          <label for="eventName">Event Name *</label>
          <input
            id="eventName"
            type="text"
            [(ngModel)]="newEvent.name"
            name="name"
            placeholder="Enter event name"
            required
          />
        </div>

        <div class="form-group">
          <label for="eventDescription">Description</label>
          <textarea
            id="eventDescription"
            [(ngModel)]="newEvent.description"
            name="description"
            placeholder="Enter event description"
            rows="3"
          ></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="eventDate">Event Date *</label>
            <input
              id="eventDate"
              type="date"
              [(ngModel)]="newEvent.eventDate"
              name="eventDate"
              required
            />
          </div>

          <div class="form-group">
            <label for="pointsPool">Points Pool *</label>
            <input
              id="pointsPool"
              type="number"
              [(ngModel)]="newEvent.pointsPool"
              name="pointsPool"
              placeholder="0"
              required
            />
          </div>
        </div>
      </form>
    </div>

    <div class="modal-footer">
      <app-button variant="secondary" (clicked)="closeEventModal()">
        Cancel
      </app-button>
      <app-button (clicked)="createEvent()">
        Create Event
      </app-button>
    </div>
  </div>
</div>

<!-- Create Product Modal -->
<div class="modal-overlay" *ngIf="showProductModal()" (click)="closeProductModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>ğŸ Add New Product</h3>
      <button class="close-btn" (click)="closeProductModal()">âœ•</button>
    </div>

    <div class="modal-body">
      <form>
        <div class="form-group">
          <label for="productName">Product Name *</label>
          <input
            id="productName"
            type="text"
            [(ngModel)]="newProduct.name"
            name="name"
            placeholder="Enter product name"
            required
          />
        </div>

        <div class="form-group">
          <label for="productDescription">Description</label>
          <textarea
            id="productDescription"
            [(ngModel)]="newProduct.description"
            name="description"
            placeholder="Enter product description"
            rows="3"
          ></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="productCategory">Category *</label>
            <select
              id="productCategory"
              [(ngModel)]="newProduct.category"
              name="category"
              required
            >
              <option value="Electronics">Electronics</option>
              <option value="Appliances">Appliances</option>
              <option value="Wearables">Wearables</option>
              <option value="Office">Office</option>
              <option value="Accessories">Accessories</option>
            </select>
          </div>

          <div class="form-group">
            <label for="pointsPrice">Points Price *</label>
            <input
              id="pointsPrice"
              type="number"
              [(ngModel)]="newProduct.pointsPrice"
              name="pointsPrice"
              placeholder="0"
              required
            />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="stock">Stock Quantity *</label>
            <input
              id="stock"
              type="number"
              [(ngModel)]="newProduct.stock"
              name="stock"
              placeholder="0"
              required
            />
          </div>

          <div class="form-group">
            <label for="imageUrl">Image URL</label>
            <input
              id="imageUrl"
              type="text"
              [(ngModel)]="newProduct.imageUrl"
              name="imageUrl"
              placeholder="https://..."
            />
          </div>
        </div>
      </form>
    </div>

    <div class="modal-footer">
      <app-button variant="secondary" (clicked)="closeProductModal()">
        Cancel
      </app-button>
      <app-button (clicked)="createProduct()">
        Add Product
      </app-button>
    </div>
  </div>
</div>
